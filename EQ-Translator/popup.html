<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>EQ Translator</title>
  <link rel="stylesheet" href="css/popup.css">
</head>
<body>
  <div class="container">
    <header>
      <h1>EQ Translator</h1>
      <div class="status">
        <span id="status-text">Ready</span>
        <span id="status-icon" class="status-icon"></span>
      </div>
    </header>

    <main>
      <!-- Audio Capture Section -->
      <section class="section">
        <h2>Audio Capture</h2>
        <div class="controls">
          <button id="start-capture" class="btn primary">ðŸŽ¯ Start Capture</button>
          <button id="stop-capture" class="btn secondary" disabled>Stop</button>
        </div>
        
        <div class="api-controls">
          <label class="checkbox">
            <input type="checkbox" id="use-api-interception" checked>
            Enable API Interception Magic
          </label>
          <span id="interception-status" class="badge">Ready</span>
        </div>
        
        <div class="visualizer">
          <canvas id="audio-visualizer"></canvas>
        </div>
      </section>

      <!-- Equalizer Section -->
      <section class="section">
        <div class="section-header">
          <h2>Equalizer</h2>
          <button class="toggle-btn" data-section="equalizer">â–¼</button>
        </div>
        <div class="section-content" id="equalizer-content">
          <div class="controls">
            <label class="checkbox">
              <input type="checkbox" id="eq-enabled" checked>
              Enable EQ
            </label>
            <button id="eq-reset" class="btn small">Reset</button>
          </div>
          
          <div class="eq-sliders">
            <div class="eq-band" data-freq="100">
              <span class="label">100Hz</span>
              <input type="range" min="-12" max="12" value="0" class="slider vertical">
              <span class="value">0dB</span>
            </div>
            <div class="eq-band" data-freq="250">
              <span class="label">250Hz</span>
              <input type="range" min="-12" max="12" value="0" class="slider vertical">
              <span class="value">0dB</span>
            </div>
            <div class="eq-band" data-freq="500">
              <span class="label">500Hz</span>
              <input type="range" min="-12" max="12" value="0" class="slider vertical">
              <span class="value">0dB</span>
            </div>
            <div class="eq-band" data-freq="1000">
              <span class="label">1kHz</span>
              <input type="range" min="-12" max="12" value="0" class="slider vertical">
              <span class="value">0dB</span>
            </div>
            <div class="eq-band" data-freq="4000">
              <span class="label">4kHz</span>
              <input type="range" min="-12" max="12" value="0" class="slider vertical">
              <span class="value">0dB</span>
            </div>
            <div class="eq-band" data-freq="8000">
              <span class="label">8kHz</span>
              <input type="range" min="-12" max="12" value="0" class="slider vertical">
              <span class="value">0dB</span>
            </div>
          </div>
          
          <div class="presets">
            <button class="btn small" data-preset="flat">Flat</button>
            <button class="btn small" data-preset="bass">Bass</button>
            <button class="btn small" data-preset="vocal">Vocal</button>
            <button class="btn small" data-preset="treble">Treble</button>
          </div>
        </div>
      </section>

      <!-- Speech Recognition Section -->
      <section class="section">
        <div class="section-header">
          <h2>Speech Recognition</h2>
          <button class="toggle-btn" data-section="recognition">â–¼</button>
        </div>
        <div class="section-content" id="recognition-content">
          <div class="controls">
            <select id="source-language">
              <option value="en-US">English (US)</option>
              <option value="es-ES">Spanish</option>
              <option value="fr-FR">French</option>
              <option value="de-DE">German</option>
              <option value="it-IT">Italian</option>
              <option value="ja-JP">Japanese</option>
              <option value="ko-KR">Korean</option>
              <option value="zh-CN">Chinese</option>
            </select>
            <button id="toggle-recognition" class="btn primary">Start Recognition</button>
            <button id="check-mic" class="btn small">ðŸŽ¤ Check Mic</button>
          </div>
          
          <div class="status-row">
            <span>Source: <span id="recognition-source" class="badge">Ready</span></span>
            <span id="magic-indicator" class="magic">âœ¨</span>
          </div>
          
          <div id="permission-help" class="help-box" style="display: none;">
            <h4>ðŸŽ¤ Need Microphone Access?</h4>
            <p>Look for the microphone icon (ðŸŽ¤) in your address bar and click "Allow"</p>
            <button id="hide-help" class="btn small">Got it!</button>
          </div>
          
          <div class="transcript-box">
            <div class="box-header">
              <h3>Transcript</h3>
              <button id="clear-transcript" class="btn small">Clear</button>
            </div>
            <div id="transcript" class="content"></div>
          </div>
        </div>
      </section>

      <!-- Translation Section -->
      <section class="section">
        <div class="section-header">
          <h2>Translation</h2>
          <button class="toggle-btn" data-section="translation">â–¼</button>
        </div>
        <div class="section-content" id="translation-content">
          <div class="controls">
            <select id="target-language">
              <option value="en">English</option>
              <option value="es" selected>Spanish</option>
              <option value="fr">French</option>
              <option value="de">German</option>
              <option value="it">Italian</option>
              <option value="ja">Japanese</option>
              <option value="ko">Korean</option>
              <option value="zh">Chinese</option>
            </select>
            <label class="checkbox">
              <input type="checkbox" id="auto-translate" checked>
              Auto-translate
            </label>
            <button id="translate-btn" class="btn small">Translate</button>
          </div>
          
          <div class="translation-box">
            <div class="box-header">
              <h3>Translation</h3>
              <button id="copy-translation" class="btn small">Copy</button>
            </div>
            <div id="translation-result" class="content"></div>
          </div>
        </div>
      </section>

      <!-- Speech Synthesis Section -->
      <section class="section">
        <div class="section-header">
          <h2>Speech Synthesis</h2>
          <button class="toggle-btn" data-section="speech">â–¼</button>
        </div>
        <div class="section-content" id="speech-content">
          <div class="controls">
            <select id="voice-select"></select>
            <label class="checkbox">
              <input type="checkbox" id="auto-speak" checked>
              Auto-speak
            </label>
            <button id="speak-btn" class="btn small">Speak</button>
            <button id="stop-speech" class="btn small">Stop</button>
          </div>
          
          <div class="speech-controls">
            <div class="slider-group">
              <label>Rate: <span id="rate-value">1.0</span></label>
              <input type="range" min="0.5" max="2" step="0.1" value="1" id="speech-rate">
            </div>
            <div class="slider-group">
              <label>Pitch: <span id="pitch-value">1.0</span></label>
              <input type="range" min="0.5" max="2" step="0.1" value="1" id="speech-pitch">
            </div>
            <div class="slider-group">
              <label>Volume: <span id="volume-value">1.0</span></label>
              <input type="range" min="0" max="1" step="0.1" value="1" id="speech-volume">
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer>
      <div class="version">v1.0.0 ðŸŽ¯ Magic Edition</div>
    </footer>
  </div>

  <!-- Notification Container -->
  <div id="notifications"></div>

  <!-- Scripts -->
  <script src="js/core/storage.js"></script>
  <script src="js/core/audio-processor.js"></script>
  <script src="js/core/capture-manager.js"></script>
  <script src="js/core/speech-recognizer.js"></script>
  <script src="js/core/translator.js"></script>
  <script src="js/core/speech-synthesizer.js"></script>
  <script src="js/core/visualizer.js"></script>
  <script src="js/popup.js"></script>
</body>
</html>